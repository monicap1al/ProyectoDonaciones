(this.webpackJsonpfrnlencastore=this.webpackJsonpfrnlencastore||[]).push([[0],{37:function(e,t,a){e.exports=a(76)},42:function(e,t,a){},43:function(e,t,a){},66:function(e,t,a){},67:function(e,t,a){},68:function(e,t,a){},69:function(e,t,a){},70:function(e,t,a){},72:function(e,t,a){},73:function(e,t,a){},74:function(e,t,a){},75:function(e,t,a){},76:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(34),l=a.n(o),c=(a(42),a(12)),s=a(19),i=a(5),u=a(6),m=a(1),h=a(8),p=a(7),d=(a(43),a(2)),g=a(15),f=function(e){var t=e.component,a=e.auth,n=Object(s.a)(e,["component","auth"]);return r.a.createElement(g.b,Object.assign({},n,{component:function(e){return a.isLogged?r.a.createElement(t,Object.assign({},e,{auth:a})):r.a.createElement(g.a,{to:{pathname:"/login",state:{from:e.location}}})}}))},E=a(23),v=a.n(E),b=v.a.create();b.defaults.headers.common["cache-control"]="no-cache",b.defaults.headers.post["Content-Type"]="no-cache",b.defaults.headers.put["Content-Type"]="no-cache";var j=b,C=v.a.create();C.defaults.headers.common["cache-control"]="no-cache",C.defaults.headers.post["Content-Type"]="no-cache",C.defaults.headers.put["Content-Type"]="no-cache";var O=function(e){C.defaults.headers.common.Authorization="Bearer ".concat(e)},k=C,y=function(){try{return localStorage.setItem("t","t"),localStorage.removeItem("t"),!0}catch(e){return!1}}(),w=function(e,t){return!!y&&(localStorage.setItem(e,t),!0)},S=function(e){return y?localStorage.getItem(e):null},M=function(e){return!!y&&(localStorage.removeItem(e),!0)},N=(a(66),function(e){var t=e.children,a=e.title,n=e.login||function(e){};return r.a.createElement("h1",{onClick:function(e){n(e,{email:"Brupo TegMeals",id:"TegMeals",roles:["public","admin"]})}},a," ",t)}),L=a(4),I=(a(67),function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).state={counter:0},e.counterUpdate=e.counterUpdate.bind(Object(m.a)(e)),e.logoutOnClick=e.logoutOnClick.bind(Object(m.a)(e)),e}return Object(u.a)(a,[{key:"counterUpdate",value:function(e){e.preventDefault(),e.stopPropagation(),this.setState({counter:this.state.counter+1})}},{key:"logoutOnClick",value:function(e){e.preventDefault(),e.stopPropagation(),this.props.auth.logout()}},{key:"render",value:function(){return this.props.hide?null:this.props.auth&&this.props.auth.isLogged?r.a.createElement("footer",null,r.a.createElement("nav",null,r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(d.c,{to:"/"},r.a.createElement(L.b,null),"Home")),r.a.createElement("li",null,r.a.createElement(d.c,{to:"/productos"},r.a.createElement(L.a,null)," Products")),r.a.createElement("li",null,r.a.createElement(d.c,{to:"/signin"},r.a.createElement(L.e,null)," Orders")),r.a.createElement("li",null,r.a.createElement("a",{onClick:this.logoutOnClick},r.a.createElement(L.e,null)," Logout"))))):r.a.createElement("footer",null,r.a.createElement("nav",null,r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(d.c,{to:"/"},r.a.createElement(L.b,null),"Home")),r.a.createElement("li",null,r.a.createElement(d.c,{to:"/login"},r.a.createElement(L.e,null)," Login")),r.a.createElement("li",null,r.a.createElement(d.c,{to:"/signin"},r.a.createElement(L.e,null)," SignIn")))))}}]),a}(n.Component)),T=(a(68),function(e){var t=e.pageTitle,a=e.hideFooter,n=e.children,o=e.auth,l=a||!1;return r.a.createElement("section",{className:"page"},r.a.createElement(N,null,t||"Page"),r.a.createElement("main",null,n),l?null:r.a.createElement(I,{auth:o}))}),P=function(e){var t=e.auth;return r.a.createElement(T,{pageTitle:"Home Page",auth:t},r.a.createElement("p",null,"Lorem ipsum dolor sit amet consectetur adipisicing elit. Minus, quia vel? Iure eaque ipsam, magni animi debitis sapiente consequuntur quos repudiandae. Consequatur perferendis accusantium voluptatum harum, aliquid dolor repellendus facere."))},A=a(13),D=(a(69),function(e){var t=e.name,a=e.value,n=e.type,o=e.caption,l=e.onChange,c=e.error;return r.a.createElement("fieldset",null,r.a.createElement("label",{htmlFor:t},o),r.a.createElement("input",{type:n||"text",name:t,id:t,value:a,onChange:l||function(e){return!1}}),c?r.a.createElement("span",{className:"error"},c):null)}),H=(a(70),function(e){var t=e.children;return r.a.createElement("fieldset",{className:"action"},t)}),x=/^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/,z=/^\s?$/,q=function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).state={email:"",emailError:null,password:"",passwordError:null,redirecTo:!1},e.onChangeHandler=e.onChangeHandler.bind(Object(m.a)(e)),e.onClickLogin=e.onClickLogin.bind(Object(m.a)(e)),e.onClickCreateAccount=e.onClickCreateAccount.bind(Object(m.a)(e)),e.validate=e.validate.bind(Object(m.a)(e)),e}return Object(u.a)(a,[{key:"validate",value:function(e){var t=null,a=[],n=e.email,r=e.password;return void 0!==n&&(x.test(n)||a.push("El correo debe tener formato correcto"),/^\s*$/.test(n)&&a.push("Debe Ingresar Correo Adecuado"),a.length&&(t=Object.assign({},t,{emailError:a.join(". ")}))),void 0!==r&&(a=[],z.test(r)&&a.push("Debe Ingresar Contrase\xf1a Adecuado"),a.length&&(t=Object.assign({},t,{passwordError:a.join(". ")}))),t}},{key:"onChangeHandler",value:function(e){var t=e.currentTarget,a=t.name,n=t.value,r=this.validate(Object(A.a)({},a,n));r||(r=Object(A.a)({},a+"Error","")),this.setState(Object(c.a)({},this.state,Object(A.a)({},a,n),r))}},{key:"onClickLogin",value:function(e){var t=this;e.preventDefault(),e.stopPropagation();var a=this.validate(this.state);if(a)this.setState(Object(c.a)({},this.state,{},a));else{alert(JSON.stringify(this.state));var n=this.state,r=n.email,o=n.password;j.post("/api/seguridad/login",{userEmail:r,userPswd:o}).then((function(e){console.log(e.data),t.props.login(e.data),t.setState(Object(c.a)({},t.state,{redirecTo:!0}))})).catch((function(e){console.log(e)}))}}},{key:"onClickCreateAccount",value:function(e){e.preventDefault(),e.stopPropagation();var t=this.props.location.state?this.props.location.state.from.pathname:"/signin";return r.a.createElement(g.a,{to:t})}},{key:"render",value:function(){if(this.state.redirecTo){var e=this.props.location.state?this.props.location.state.from.pathname:"/";return r.a.createElement(g.a,{to:e})}return r.a.createElement(T,{pageTitle:"Iniciar",auth:this.props.auth},r.a.createElement(D,{name:"email",caption:"Correo",value:this.state.email,type:"text",onChange:this.onChangeHandler,error:this.state.emailError}),r.a.createElement(D,{name:"password",caption:"Contrase\xf1a",value:this.state.password,type:"password",onChange:this.onChangeHandler,error:this.state.passwordError}),r.a.createElement(H,null,r.a.createElement("button",{onClick:this.onClickLogin},"Iniciar Sesi\xf3n"),r.a.createElement("button",{onClick:this.onClickCreateAccount},"Crear Cuenta")))}}]),a}(n.Component),B=function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).state={userName:"",userNameError:null,email:"",emailError:null,password:"",passwordError:null},e.onChangeHandler=e.onChangeHandler.bind(Object(m.a)(e)),e.onClickLogin=e.onClickLogin.bind(Object(m.a)(e)),e.onClickCreateAccount=e.onClickCreateAccount.bind(Object(m.a)(e)),e.validate=e.validate.bind(Object(m.a)(e)),e}return Object(u.a)(a,[{key:"validate",value:function(e){var t=null,a=[],n=e.email,r=e.password;return void 0!==n&&(x.test(n)||a.push("El correo debe tener formato correcto"),/^\s*$/.test(n)&&a.push("Debe Ingresar Correo Adecuado"),a.length&&(t=Object.assign({},t,{emailError:a.join(". ")}))),void 0!==r&&(a=[],z.test(r)&&a.push("Debe Ingresar Contrase\xf1a Adecuado"),a.length&&(t=Object.assign({},t,{passwordError:a.join(". ")}))),t}},{key:"onChangeHandler",value:function(e){var t=e.currentTarget,a=t.name,n=t.value,r=this.validate(Object(A.a)({},a,n));r||(r=Object(A.a)({},a+"Error","")),this.setState(Object(c.a)({},this.state,Object(A.a)({},a,n),r))}},{key:"onClickCreateAccount",value:function(e){e.preventDefault(),e.stopPropagation();var t=this.validate(this.state);if(t)this.setState(Object(c.a)({},this.state,{},t));else{var a=this.state,n=a.email,r=a.password,o=a.userName;j.post("/api/seguridad/users/new",{useremail:n,userpswd:r,usernames:o}).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))}}},{key:"onClickLogin",value:function(e){e.preventDefault(),e.stopPropagation(),alert("Click en Login")}},{key:"render",value:function(){return r.a.createElement(T,{pageTitle:"Nueva Cuenta",auth:this.props.auth},r.a.createElement(D,{name:"userName",caption:"Nombre Completo",value:this.state.userName,type:"text",onChange:this.onChangeHandler,error:this.state.userNameError}),r.a.createElement(D,{name:"email",caption:"Correo",value:this.state.email,type:"text",onChange:this.onChangeHandler,error:this.state.emailError}),r.a.createElement(D,{name:"password",caption:"Contrase\xf1a",value:this.state.password,type:"password",onChange:this.onChangeHandler,error:this.state.passwordError}),r.a.createElement(H,null,r.a.createElement("button",{onClick:this.onClickCreateAccount},"Crear Cuenta"),r.a.createElement("button",{onClick:this.onClickLogin},"Iniciar Sesi\xf3n")))}}]),a}(n.Component),_=a(18),$=a.n(_),R=(a(72),function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).state={items:[],hasMore:!0,page:1,itemsToLoad:10},e.loadMore=e.loadMore.bind(Object(m.a)(e)),e}return Object(u.a)(a,[{key:"loadMore",value:function(e){var t=this,a=this.state.itemsToLoad,n="/api/platillos/platillos/".concat(e,"/").concat(a);k.get(n).then((function(n){var r=n.data;console.log(r);var o=r.products,l=r.total,c=t.state.items;o.map((function(e){return c.push(e)})),l?t.setState({items:c,hasMore:e*a<l}):t.setState({hasMore:!1})})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e=this,t=this.state.items.map((function(e){return r.a.createElement("div",{className:"listItem",key:e._id},r.a.createElement("span",null,e.id," ",e.DescCorta),r.a.createElement("span",{className:"updateListItem"},r.a.createElement(d.b,{to:"/platillos/".concat(e._id)},r.a.createElement(L.d,{size:"2em"})),r.a.createElement(d.b,{to:"/platillos/img/".concat(e._id)},r.a.createElement(L.c,{size:"2em"}))))}));return t.length||t.push(r.a.createElement("div",{className:"listItem",key:"pbListAddOne"},r.a.createElement("span",null,"Nuevo Item"),r.a.createElement(d.b,{to:"/changeThis"},r.a.createElement(L.g,{size:"2.5em"})))),r.a.createElement(T,{pageTitle:"Platillos",auth:this.props.auth},r.a.createElement("div",{className:"list",ref:function(t){return e.scrollParentRef=t}},r.a.createElement($.a,{pageStart:0,loadMore:this.loadMore,hasMore:this.state.hasMore,useWindow:!1,threshold:108,getScrollParent:function(){return e.scrollParentRef},loader:r.a.createElement("div",{key:"pbListLoading",className:"listItem center"},r.a.createElement(L.f,null))},t)))}}]),a}(n.Component)),W=(a(73),function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).state={},e.addMoreStock=e.addMoreStock.bind(Object(m.a)(e)),e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.id;k.get("/api/platillos/platillos/".concat(t)).then((function(t){e.setState(t.data)})).catch((function(e){console.log(e)}))}},{key:"addMoreStock",value:function(e){var t=this;e.preventDefault(),e.stopPropagation();var a=this.props.match.params.id;k.put("/api/platillos/platillos/stock/".concat(a),{stock:1}).then((function(e){t.setState(e.data)})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){if(!this.props.match.params.id)return r.a.createElement(g.a,{to:"/platillos"});var e=this.state,t=e.desccorta,a=e.precio,n=e.categoria,o=e.empresa;return r.a.createElement(T,{pageTitle:t,auth:this.props.auth},r.a.createElement("span",{className:"detailitem"},t),r.a.createElement("span",{className:"detailitem"},a),r.a.createElement("span",{className:"detailitem"},n),r.a.createElement("span",{className:"detailitem"},o),r.a.createElement("fieldset",null,r.a.createElement("button",{onClick:this.addMoreStock},"Add One more Stock +")))}}]),a}(n.Component)),J=(a(74),function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).state={items:[],hasMore:!0,page:1,itemsToLoad:10},e.loadMore=e.loadMore.bind(Object(m.a)(e)),e}return Object(u.a)(a,[{key:"loadMore",value:function(e){var t=this,a=this.state.itemsToLoad,n="/api/empresa/empresa/".concat(e,"/").concat(a);k.get(n).then((function(n){var r=n.data;console.log(r);var o=r.products,l=r.total,c=t.state.items;o.map((function(e){return c.push(e)})),l?t.setState({items:c,hasMore:e*a<l}):t.setState({hasMore:!1})})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e=this,t=this.state.items.map((function(e){return r.a.createElement("div",{className:"listItem",key:e._id},r.a.createElement("span",null,e.id," ",e.userCompleteName),r.a.createElement("span",{className:"updateListItem"},r.a.createElement(d.b,{to:"/empresas/".concat(e._id)},r.a.createElement(L.d,{size:"2em"})),r.a.createElement(d.b,{to:"/empresas/img/".concat(e._id)},r.a.createElement(L.c,{size:"2em"}))))}));return t.length||t.push(r.a.createElement("div",{className:"listItem",key:"pbListAddOne"},r.a.createElement("span",null,"Nuevo Item"),r.a.createElement(d.b,{to:"/changeThis"},r.a.createElement(L.g,{size:"2.5em"})))),r.a.createElement(T,{pageTitle:"Empresas",auth:this.props.auth},r.a.createElement("div",{className:"list",ref:function(t){return e.scrollParentRef=t}},r.a.createElement($.a,{pageStart:0,loadMore:this.loadMore,hasMore:this.state.hasMore,useWindow:!1,threshold:108,getScrollParent:function(){return e.scrollParentRef},loader:r.a.createElement("div",{key:"pbListLoading",className:"listItem center"},r.a.createElement(L.f,null))},t)))}}]),a}(n.Component)),U=(a(75),function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).state={},e.addMoreStock=e.addMoreStock.bind(Object(m.a)(e)),e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.id;k.get("/api/empresa/empresa/".concat(t)).then((function(t){e.setState(t.data)})).catch((function(e){console.log(e)}))}},{key:"addMoreStock",value:function(e){var t=this;e.preventDefault(),e.stopPropagation();var a=this.props.match.params.id;k.put("/api/empresa/empresa/stock/".concat(a),{stock:1}).then((function(e){t.setState(e.data)})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){if(!this.props.match.params.id)return r.a.createElement(g.a,{to:"/empresa"});var e=this.state,t=e.usernames,a=e.useremail,n=e.userrtn;return r.a.createElement(T,{pageTitle:t,auth:this.props.auth},r.a.createElement("span",{className:"detailitem"},t),r.a.createElement("span",{className:"detailitem"},a),r.a.createElement("span",{className:"detailitem"},n),r.a.createElement("fieldset",null,r.a.createElement("button",{onClick:this.addMoreStock},"Add One more Stock +")))}}]),a}(n.Component)),F=function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).state={user:S("user")||{},jwt:S("jwt")||"",isLogged:!1,loadingBackend:!1},""!==e.state.jwt&&(e.state.isLogged=!0,O(e.state.jwt)),e.login=e.login.bind(Object(m.a)(e)),e.logout=e.logout.bind(Object(m.a)(e)),e}return Object(u.a)(a,[{key:"login",value:function(e){var t=e.jwt,a=Object(s.a)(e,["jwt"]);this.setState(Object(c.a)({},this.state,{isLogged:!0,loadingBackend:!1,user:a,jwt:t})),O(t),w("jwt",t),w("user",a)}},{key:"logout",value:function(){M("jwt"),M("user"),this.setState(Object(c.a)({},this.state,{isLogged:!1,user:{},jwt:""}))}},{key:"render",value:function(){var e=this,t={isLogged:this.state.isLogged,user:this.state.user,logout:this.logout};return console.log(t),r.a.createElement(d.a,null,r.a.createElement("div",{className:"App"},r.a.createElement(g.d,null,r.a.createElement(g.b,{render:function(e){return r.a.createElement(P,Object.assign({},e,{auth:t}))},path:"/",exact:!0}),r.a.createElement(g.b,{render:function(a){return r.a.createElement(q,Object.assign({},a,{auth:t,login:e.login}))},path:"/login",exact:!0}),r.a.createElement(g.b,{render:function(e){return r.a.createElement(B,Object.assign({},e,{auth:t}))},path:"/signin",exact:!0}),r.a.createElement(f,{component:P,path:"/privatehome",exact:!0,auth:t}),r.a.createElement(f,{component:R,path:"/platillos",exact:!0,auth:t}),r.a.createElement(f,{component:W,path:"/platillos/:id",exact:!0,auth:t}),r.a.createElement(f,{component:J,path:"/empresa",exact:!0,auth:t}),r.a.createElement(f,{component:U,path:"/empresa/:id",exact:!0,auth:t}))))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(F,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[37,1,2]]]);
//# sourceMappingURL=main.8feb1440.chunk.js.map